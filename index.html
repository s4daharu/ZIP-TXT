<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File Combiner Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Frameworks and Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Main Application Container -->
    <main class="container main-container">
        <div id="mainCard" class="card-panel">
            <h1 class="center-align gradient-text">File Combiner Pro</h1>
            <p class="center-align grey-text">Combine multiple files into a single text file.</p>

            <!-- Configuration Accordion -->
            <ul class="collapsible">
                <li>
                    <div class="collapsible-header"><i class="material-icons">settings</i>Options & Configuration</div>
                    <div class="collapsible-body">
                        <div class="row option-row">
                            <div class="input-field col s12">
                                <select id="structureFormat">
                                    <option value="tree">Tree</option><option value="flat">Flat List</option><option value="simple">Numbered List</option><option value="detailed">Detailed Summary</option><option value="markdown">Markdown List</option><option value="none">None</option>
                                </select>
                                <label>Structure Format</label>
                            </div>
                            <div class="input-field col s12">
                                <p><label><input type="checkbox" id="disableCommentsCheckbox" /><span>Disable Start/End Comments</span></label></p>
                            </div>
                            <div class="input-field col s12">
                                <input id="startComment" type="text" value="/* ==== START {index}/{totalFiles} - {filename} ({path}) ==== */">
                                <label for="startComment">Start Comment Template</label>
                            </div>
                            <div class="input-field col s12">
                                <input id="endComment" type="text" value="/* ==== END - {filename} ==== */">
                                <label for="endComment">End Comment Template</label>
                            </div>
                            <div class="input-field col s12">
                                <textarea id="exclusionFilter" class="materialize-textarea" placeholder="e.g., node_modules/&#10;*.log"></textarea>
                                <label for="exclusionFilter">Exclusion Filter (gitignore style)</label>
                            </div>
                            <div class="col s12 config-buttons">
                                <button id="saveConfigButton" class="btn-small waves-effect waves-light grey darken-1">Save</button>
                                <button id="loadConfigButton" class="btn-small waves-effect waves-light grey darken-1">Load</button>
                                <span id="configStatus" class="right green-text text-accent-3"></span>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>

            <!-- File Input -->
            <div class="file-field input-field center-align">
                <a id="fileInputTrigger" class="btn-large waves-effect waves-light accent-gradient">
                    <span><i class="material-icons left">add_circle_outline</i>Add Files / Folder / Zip</span>
                    <input type="file" id="fileInput" multiple webkitdirectory directory>
                </a>
                <p class="grey-text helper-text">Or drag and drop files/folders here.</p>
            </div>
            
            <div id="processingIndicator" class="center-align processing-indicator">
                <div class="preloader-wrapper small active"><div class="spinner-layer"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>
                <p>Processing...</p>
            </div>
            
            <!-- File List & Actions -->
            <div class="file-list-area">
                <div class="row valign-wrapper file-list-header">
                    <div class="col s6"><label>Selected Files:</label></div>
                    <div class="col s6 right-align">
                        <button id="statsButton" class="btn-small waves-effect waves-light teal disabled">Stats</button>
                        <button id="clearAllButton" class="btn-small waves-effect waves-light red disabled">Clear</button>
                    </div>
                </div>
                <ul id="fileListContainer" class="collection">
                    <li id="noFilesMessage" class="collection-item center-align grey-text">No files selected.</li>
                </ul>
            </div>

            <!-- Primary Action Button -->
            <div class="center-align action-button-area">
                <button id="combineButton" class="btn-large waves-effect waves-light green darken-1 disabled">
                    <i class="material-icons left">merge_type</i>Combine <span id="fileCount">(0)</span> Files
                </button>
            </div>

            <!-- Download & Copy Area -->
            <div id="outputArea" class="center-align output-area">
                <a id="downloadLink" class="btn waves-effect waves-light purple" download="combined_files.txt"></a>
                <button id="copyButton" class="btn waves-effect waves-light indigo">Copy to Clipboard</button>
                <p id="copyStatusMessage" class="green-text text-accent-3 status-message"></p>
            </div>
        </div>
    </main>
    
    <!-- Floating Action Button for Theme Toggle -->
    <div class="fixed-action-btn">
        <a id="themeToggle" class="btn-floating btn-large grey darken-2">
            <i class="large material-icons">brightness_4</i>
        </a>
    </div>

    <!-- Statistics Modal -->
    <div id="statsModal" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4>Content Statistics</h4>
            <div id="statsContent"></div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div>

    <!-- External JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="script.js" defer></script>

</body>
</html>